---
layout: post
title: "JpaRepository λ ν¬μ§€ν† λ¦¬ ν΄λμ¤λ” μ™ μΈν„°νμ΄μ¤μΌκΉ?"
tags: Backend
lastmod: 2025-01-22
sitemap:
  changefreq: daily
  priority: 0.8
---

μΈν„°νμ΄μ¤μ™€ κµ¬ν„μ²΄μ™€μ κ΄€κ³„μ— λ€ν•΄ κ³µλ¶€ν•λ©΄μ„ κµ¬ν„μ²΄κ°€ 2κ° μ΄μƒμΈ κ²½μ°μ—λ” μΈν„°νμ΄μ¤λ¥Ό λ‘κ³  μ΄λ¥Ό μƒμ†λ°›μ•„ κµ¬ν„ν•λ” κ²ƒμ΄ ν•©λ¦¬μ μΌλ΅ μ΄ν•΄κ°€ λμ—λ”λ°, κµ¬ν„μ²΄κ°€ λ‹¨ 1κ°μΈ κ²½μ°μ—λ” μ™ μΈν„°νμ΄μ¤λ¥Ό λ‘¬μ•Όν•λ”μ§€μ— λ€ν•΄ μλ¬Έμ΄ μƒκ²Όμµλ‹λ‹¤.

μ΄μ— λ€ν•΄μ„λ” **'Unit Testing'** μ±…μ„ ν•™μµν•λ©΄μ„ κ¶κΈν–λ κ±Έ ν•΄μ†ν–λ”λ°μ”! κµ¬ν„μ΄ ν•λ‚λΏμΈ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ νƒ€λ‹Ήν• κ²½μ°λ”, **ν…μ¤νΈλ¥Ό ν•  λ• λ©μ„ μ‚¬μ©ν•κΈ° μ„ν• κ²ƒλΏ**μ΄λΌλ” κ²ƒμ„ μ•κ² λμµλ‹λ‹¤.

μ—¬κΈ°μ„ λ λ‹¤λ¥Έ μλ¬Έμ΄ μƒκ²Όμµλ‹λ‹¤. π¤¨

μΌλ°μ μΌλ΅ μ›Ή μ„λ²„ κ°λ°μ„ ν•  λ• μΈν„°νμ΄μ¤λ¥Ό μ£Όλ΅ μ‚¬μ©ν•λ” κ²½μ°κ°€ `JpaRepository`λ¥Ό μƒμ†λ°›μ•„ λ ν¬μ§€ν† λ¦¬ ν΄λμ¤λ¥Ό λ§λ“λ” κ²½μ°μΈλ°μ”. μ΄λ” Springμ—μ„ μλ™μΌλ΅ μƒμ„±ν•΄μ£Όλ” κµ¬ν„μ²΄λ„ ν•λ‚λΏμ΄λ©° **λ°μ΄ν„°λ² μ΄μ¤λ” κ΄€λ¦¬ μμ΅΄μ„±μ— ν•΄λ‹Ή**ν•κΈ° λ•λ¬Έμ— ν…μ¤νΈμ—μ„λ„ (λ©μΌλ΅ λ€μ²΄ν•μ§€ μ•κ³ ) μ‹¤μ  μΈμ¤ν„΄μ¤λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. κ·Έλ ‡λ‹¤λ©΄ λ‚¨μ€ μ΄μ λ” `Spring Data JPA` μμ΅΄μ„±μ λ‚΄λ¶€ κµ¬ν„μ— μν•΄μ„ μΈν„°νμ΄μ¤ ν΄λμ¤λ΅ μ‘μ„±μ„ ν•΄μ•Ό"**λ§**" ν•κΈ° λ•λ¬ΈμΈ κ²ƒμΌλ΅ μ¶”μΈ΅ν•μ€μµλ‹λ‹¤. λ”°λΌμ„ `Spring Data JPA` μ—μ„ λ ν¬μ§€ν† λ¦¬ ν΄λμ¤μ κµ¬ν„μ²΄λ¥Ό λ§λ“λ” λ°©μ‹μ„ μ°Ύμ•„λ³΄κ² μµλ‹λ‹¤.β›³οΈ

---

## π³JPA Repository λ“¤ μ°ΎκΈ°

- Spring μ€ λ°νƒ€μ„μ— λ¨λ“  ν΄λμ¤μ™€ μΈν„°νμ΄μ¤λ¥Ό μ¤μΊ”ν•©λ‹λ‹¤.
  - μ°Έκ³ λ΅ `@Repository` μ• λ…Έν…μ΄μ…μ΄ μ΄ μ¤μΊ” κ³Όμ •μ—μ„ μ”κµ¬λλ”κ±΄ μ•„λ‹λΌκ³  ν•©λ‹λ‹¤.
  - JPARepositoryλ¥Ό μƒμ†ν•λ” μΈν„°νμ΄μ¤λ” Spring μ΄ μλ™μΌλ΅ λ ν¬μ§€ν† λ¦¬ μ»΄ν¬λ„νΈλ΅ μΈμ‹ν•©λ‹λ‹¤.

> π§© κ·ΈλΌ `@Repository` μ μ©λ„λ” λ­”κ°€μ”?
> **- μ»΄ν¬λ„νΈ μ¤μΊ”**: `@Component` μ νΉμν™”λ ν•νƒλ΅, Springμ΄ μλ™μΌλ΅ λΉμΌλ΅ λ“±λ΅ν•  μ μκ² ν•©λ‹λ‹¤.
> **- μμ™Έ λ³€ν™**: Springμ DataAccessException κ³„μΈµμΌλ΅ μμ™Έλ¥Ό μλ™ λ³€ν™ν•λ” κΈ°λ¥μ΄ μμµλ‹λ‹¤.
> **- AOP μ μ© λ€μƒ**

- **Spring μ€ λ¨λ“  λ ν¬μ§€ν† λ¦¬ ν΄λμ¤λ¥Ό μ¤μΊ”ν• ν›„μ—, μ΄μ— λ¶€ν•©ν•λ” Proxy ν΄λμ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.**
  - μ΄ ν”„λ΅μ‹ ν΄λμ¤λ” μ”μ²­μ„ μ¬λ°”λ¥Έ λ ν¬μ§€ν† λ¦¬ λ©”μ„λ“λ΅ λΌμ°ν…ν•λ” μ—­ν• μ„ κ°€μ§€κ³  μμµλ‹λ‹¤.

Proxy ν΄λμ¤λ” λ­λƒ... μ €λ„ λ°λΌμ„ Proxy λ””μμΈ ν¨ν„΄λ¶€ν„° μ§κ³  λ‹¤μ λ‹¨κ³„λ΅ λ„μ–΄κ°€λ³΄κ² μµλ‹λ‹¤.

## π³ ν”„λ΅μ‹ λ””μμΈ ν¨ν„΄μ΄λ€?

ν”„λ΅μ‹ ν¨ν„΄μ€ λ‹¤λ¥Έ κ°μ²΄μ— λ€ν• λ€λ¦¬μ λλ” μλ¦¬ν‘μ‹μ μ—­ν• μ„ ν•λ” κ°μ²΄λ¥Ό μ κ³µν•©λ‹λ‹¤. ν”„λ΅μ‹λ” μ›λ κ°μ²΄μ— λ€ν• μ ‘κ·Όμ„ μ μ–΄ν•λ©°, μ›λ³Έ κ°μ²΄μ— μ”μ²­μ΄ μ „λ‹¬λκΈ° μ „μ΄λ‚ ν›„μ— μ¶”κ°€μ μΈ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

### μ‚¬μ© μμ‹

- μ ‘κ·Ό μ μ–΄
  - e.g.) μ„λ“νν‹° λΌμ΄λΈλ¬λ¦¬μ λ©”μ„λ“μ— λ€ν•΄μ„ μ§€μ •ν• κ¶ν•μ„ κ°€μ§„ μ‚¬μ©μλ§ νΈμ¶ν•  μ μλ„λ΅
- λ΅κΉ… λλ” λ¨λ‹ν„°λ§
- μΊμ‹±
- μ§€μ—° λ΅λ”© (lazy loading)

## π³ ν”„λ΅μ‹ ν΄λμ¤κ°€ μ–΄λ–»κ² μ‘λ™ν• κΉ?

![](https://velog.velcdn.com/images/adorableco/post/bbcea511-de1f-48b3-825c-c33230315dd7/image.png)

- `CustomJpaRepository` λ” κ°λ°μκ°€ μ‘μ„±ν• λ ν¬μ§€ν† λ¦¬ ν΄λμ¤

&nbsp;

#### SimpleJpaRepository

- `Spring Data JPA` μ—μ„ λ‚μ¨ ν΄λμ¤μ…λ‹λ‹¤.
- λ°μ΄ν„°λ² μ΄μ¤μ™€μ μƒνΈμ‘μ©μ„ μ„ν•΄ `EntityManager` λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- `JpaRepository` μ κµ¬ν„μ²΄μ…λ‹λ‹¤.
- βοΈ μƒμ„Έ κµ¬ν„ μ½”λ“λ¥Ό ν™•μΈν•΄λ³΄λ©΄ `@Repository` μ• λ…Έν…μ΄μ…μ΄ λ‹¬λ ¤μμµλ‹λ‹¤.

&nbsp;

#### CustomJpaRepositoryProxy

- Spring μ—μ„ μλ™ μƒμ„±ν•λ” ν”„λ΅μ‹ ν΄λμ¤
- `CustomJpaRepository` (κ°λ°μκ°€ λ§λ“  λ ν¬μ§€ν† λ¦¬ ν΄λμ¤) μ— method μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ μΈν„°μ…‰νΈ ν›„ `SimpleJpaRepository` λ΅ λ¦¬λ””λ ‰νΈν•©λ‹λ‹¤.
- β…β… μ΄ ν”„λ΅μ‹ ν΄λμ¤λ„ κ²°κµ­μ—λ” κΈ°μ΅΄(?) ν΄λμ¤λ¥Ό κµ¬ν„ν•λ” ν•νƒμ΄κΈ° λ•λ¬Έμ— κΈ°μ΅΄ ν΄λμ¤μΈ `CustomJpaRepository` ν΄λμ¤κ°€ μΈν„°νμ΄μ¤μ—¬μ•Ό ν•λ” κ²ƒμ…λ‹λ‹¤!!

&nbsp;

#### JpaRespository

- Spring Data JPAμ—μ„ μ κ³µν•λ” μΈν„°νμ΄μ¤μ…λ‹λ‹¤.
- CRUD μ‘μ—…, νμ΄μ§•, μ •λ ¬ λ“±μ κΈ°λ³Έμ μΈ λ°μ΄ν„° μ•΅μ„Έμ¤ κΈ°λ¥μ„ μ •μν•©λ‹λ‹¤.

---

## π¥§ κ²°λ΅ 

"**JPARepository λ¥Ό μƒμ†λ°›μ•„ λ§λ“λ” λ ν¬μ§€ν† λ¦¬ ν΄λμ¤λ” μ™ μΈν„°νμ΄μ¤μΌκΉ?**" λΌλ” μ§λ¬Έμ λ‹µμ€..

JPARepositoryκ°€ λ‚΄λ¶€μ μΌλ΅ ν”„λ΅μ‹ ν΄λμ¤λ¥Ό μλ™μΌλ΅ μƒμ„±ν•μ—¬, μ΄λ¥Ό ν†µν•΄ μ¬λ°”λ¥Έ (query) method λ΅ μ”μ²­μ„ λ¦¬λ””λ ‰νΈμ‹ν‚¤λ” κµ¬μ΅°μ΄κΈ° λ•λ¬Έμ΄μ—μµλ‹λ‹¤!

&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;

μ°Έκ³  μ‚¬μ΄νΈ: https://levelup.gitconnected.com/jparepository-how-is-it-implemented-2afc6751b47e
